version: '3'
services:
  # dev node with runtime v37 and client 1.2.0
  testnet_node_alice:
    container_name: testnet_node_alice
    image: cennznet/cennznet:1.2.0
    command:
      - --dev
      - --tmp
      - --no-mdns
      - --unsafe-ws-external
      - --unsafe-rpc-external
    ports:
      - '9933:9933'
      - '9944:9944'
  # dev node with runtime v36 and client 1.1.1
  v36_node:
    container_name: v36_node
    image: cennznet/cennznet:1.1.1
    command:
      - --dev
      - --no-mdns
      - --unsafe-ws-external
    ports:
      - '9945:9944'
  # a node environment to run api / e2e test scripts
  api_test:
    container_name: api_test
    environment:
      - API_KEY=$API_KEY
    build:
      context: .
      dockerfile: api_test.Dockerfile
    command: ['tail', '-f', '/dev/null']
